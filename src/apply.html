<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Подати заявку — робота кур'єром у Польщі</title>
  <link rel="stylesheet" href="/styles.css">
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MJKSZ4KN');</script>
  <!-- End Google Tag Manager -->

  <!-- Google Analytics (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-J3XSXPYW9K"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-J3XSXPYW9K');
  </script>
  <meta name="description" content="Заповніть форму, і ми зв'яжемося з вами для безкоштовної консультації щодо роботи кур'єром у Польщі.">
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MJKSZ4KN" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <header><div class="container header-flex"><a class="logo-section" href="/" aria-label="Courier Poland home"><svg class="logo" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="false"><defs><linearGradient id="g3" x1="0" x2="1" y1="0" y2="1"><stop offset="0%" stop-color="#0f766e"/><stop offset="100%" stop-color="#14b8a6"/></linearGradient></defs><rect x="6" y="6" width="108" height="108" rx="18" fill="url(#g3)" opacity="0.12"/></svg><div style="display:flex;flex-direction:column;line-height:1;"><span style="font-weight:800;color:var(--color-accent);font-size:1rem;">Courier Poland</span><small style="color:var(--color-text-light);font-size:0.78rem;margin-top:2px;">Робота кур'єром у Польщі</small></div></a><nav><a href="/">Головна</a></nav></div></header>
  <main class="container">
    <section class="hero" style="padding-top:1.5rem;padding-bottom:0.5rem;">
      <h1>Подати заявку</h1>
      <p class="lead">Заповніть форму — ми зв'яжемося для швидкого підбору роботи кур'єром у Польщі.</p>
    </section>
    <section class="apply-grid" aria-labelledby="applyHeading">
      <div class="apply-card">
        <h2 id="applyHeading" class="apply-title">Швидка заявка</h2>
        <p class="apply-intro">Кілька полів — і ми підберемо варіанти роботи та допоможемо з документами.</p>

        <form id="applyForm" class="form" novalidate>
          <div class="row two">
            <label class="field">
              <span class="field-label">Ім'я</span>
              <input class="input" id="name" name="name" required placeholder="Петро" />
            </label>

            <label class="field">
              <span class="field-label">Телефон або email</span>
              <input class="input" id="contact" name="contact" required placeholder="+48 123 456 789 або email@mail.com"/>
            </label>
          </div>

          <div class="row two">
            <label class="field">
              <span class="field-label">Місто</span>
              <input class="input" id="city" name="city" placeholder="Варшава, Краків..."/>
            </label>
            <label class="field">
              <span class="field-label">Готовий почати</span>
              <input class="input" id="start" name="start" type="date"/>
            </label>
          </div>

          <label class="field">
            <span class="field-label">Досвід (коротко)</span>
            <input class="input" id="exp" name="experience" placeholder="Наприклад: 2 роки на доставці"/>
          </label>

          <label class="field">
            <span class="field-label">Додаткова інформація</span>
            <textarea class="input textarea" id="message" name="message" rows="5" placeholder="Додайте деталі"></textarea>
          </label>

          <label class="consent">
            <input id="consent" type="checkbox" required/>
            <span>Я погоджуюсь на обробку моїх контактних даних</span>
          </label>

          <div class="form-actions">
            <button class="btn btn-primary" type="submit">Надіслати заявку</button>
            <button class="btn btn-secondary" type="button" id="clearBtn">Очистити</button>
          </div>

          <div id="formMessage" role="status" aria-live="polite" class="form-message" hidden></div>
        </form>
      </div>

      <aside class="apply-aside" aria-labelledby="asideHeading">
        <div class="card small">
          <h3 id="asideHeading">Потрібна допомога?</h3>
          <p class="muted">Ми допомагаємо з документами, легалізацією та підбором вакансій. Заявки обробляємо протягом 24 годин.</p>
          <a class="btn btn-ghost" href="/">Повернутись на головну</a>
        </div>

        <div class="card contacts">
          <h4>Контакти</h4>
          <p class="muted">Telegram: <a href="https://t.me/rybezh_site" target="_blank" rel="noopener noreferrer">@rybezh_site</a></p>
          <p class="muted">Пошта: info@courier-poland.example</p>
        </div>
      </aside>
    </section>
  </main>
  <footer>
    <div class="container">
      <p>&copy; ${new Date().getFullYear()} Courier Poland Income. Всі права захищені. &nbsp; <a href="https://t.me/rybezh_site" target="_blank" rel="noopener noreferrer">@rybezh_site</a></p>
    </div>
  </footer>
  <script>
    (function(){
      const form = document.getElementById('applyForm');
      const clearBtn = document.getElementById('clearBtn');
      const msg = document.getElementById('formMessage');
      const submitBtn = form.querySelector('button[type="submit"]');
      function show(text, ok){ msg.hidden = false; msg.textContent = text; msg.style.color = ok ? 'green' : 'crimson'; }
      function hideMsg(){ msg.hidden = true; msg.textContent = ''; }
      clearBtn.addEventListener('click', ()=>{ form.reset(); hideMsg(); });

      const GSA_URL = 'https://script.google.com/macros/s/AKfycbyZIupzVZo3q5UDGVSBzEaw1vdKFJcaEyTh5iuMgBECdd7VWE4Hq7cZ1WNL6V6Jy1FdMg/exec';

      form.addEventListener('submit', async function(e){
        e.preventDefault();
        hideMsg();
        const name = document.getElementById('name').value.trim();
        const contact = document.getElementById('contact').value.trim();
        const city = document.getElementById('city').value.trim();
        const start = document.getElementById('start').value;
        const exp = document.getElementById('exp').value.trim();
        const message = document.getElementById('message').value.trim();
        const consent = document.getElementById('consent').checked;
        if(!name){ show('Будь ласка, вкажіть своє ім\'я.', false); return; }
        if(!contact){ show('Будь ласка, вкажіть телефон або email.', false); return; }
        if(!consent){ show('Потрібна згода на обробку даних.', false); return; }

        const payload = {
          name, contact, city, start: start || null, experience: exp, message,
          page: location.href, ts: new Date().toISOString()
        };

        const bodyLines = [
          `Ім'я: ${name}`,
          `Контакт: ${contact}`,
          `Місто: ${city}`,
          `Готовий почати: ${start || 'не вказано'}`,
          `Досвід: ${exp}`,
          `Повідомлення: ${message}`,
          `Сторінка: ${location.href}`
        ];
        const body = encodeURIComponent(bodyLines.join('\n'));
        const subject = encodeURIComponent('Заявка на роботу кур\'єром — ' + name);
        const mailto = `mailto:info@courier-poland.example?subject=${subject}&body=${body}`;

        // disable submit
        submitBtn.disabled = true; submitBtn.setAttribute('aria-busy','true');
        show('Надсилаємо заявку...', true);

        try{
          // Use a no-cors FormData POST so the browser will send the request
          // to Google Apps Script even if the endpoint does not allow CORS.
          const formData = new FormData();
          Object.keys(payload).forEach(k => {
            if(payload[k] !== null && payload[k] !== undefined) formData.append(k, payload[k]);
          });

          // send as no-cors; response will be opaque but request is sent
          await fetch(GSA_URL, { method: 'POST', mode: 'no-cors', body: formData });

          // assume success (opaque response) and inform the user
          show('Дякуємо! Заявку отримано. Ми зв\'яжемося найближчим часом.', true);
          form.reset();
        } catch(err){
          console.error('Submit error', err);
          // network error — fallback to mail client
          show('Помилка мережі. Відкриваємо ваш поштовий клієнт...', false);
          window.location.href = mailto;
        } finally{
          submitBtn.disabled = false; submitBtn.removeAttribute('aria-busy');
        }
      });
    })();
  </script>
</body>
</html>
